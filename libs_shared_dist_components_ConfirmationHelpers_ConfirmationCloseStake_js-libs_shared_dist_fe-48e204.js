"use strict";(self.webpackChunk_solflare_extension=self.webpackChunk_solflare_extension||[]).push([["libs_shared_dist_components_ConfirmationHelpers_ConfirmationCloseStake_js-libs_shared_dist_fe-48e204"],{"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationCloseStake.js":(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=s("../../../node_modules/react/jsx-runtime.js"),i=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.js"),n=s("../../libs/foundation-ui/dist/index.js");t.default=({validatorName:e,validatorImage:t,stakeStatus:s})=>(0,a.jsx)(n.ConfirmTransaction,{avatar:(0,a.jsx)(n.IconAvatar,{size:"xl",icon:i.faTrashAlt}),transactionFromItem:(0,a.jsx)(n.TXListItem,{title:e,subtitle:s,avatar:(0,a.jsx)(n.ValidatorAvatar,{src:t})})})},"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationSplitStake.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/index.js"),o=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.js"),r=s("../../libs/foundation-ui/dist/index.js"),u=s("../../libs/shared/dist/constants/mints.js"),l=s("../../libs/shared/dist/features/currencies/index.js"),d=s("../../libs/shared/dist/utils/displayPrice.js"),c=a(s("../../libs/shared/dist/components/TokenAvatar/index.js"));t.default=({amount:e,validatorName:t,validatorImage:s})=>{const{value:a,suffix:m,prefix:f,price:_}=(0,l.useTokenFiatValue)("SOL",e),{t:p}=(0,n.useTranslation)(),k=(0,i.jsx)(r.TXListItem,{title:(0,d.displayPrice)({amount:e,displayType:"solana",suffix:" SOL"}),subtitle:_?(0,d.displayPrice)({amount:a,displayType:"value",suffix:m,prefix:f}):void 0,avatar:(0,i.jsx)(c.default,{src:u.SOLANA_MINT_OBJ.logoURI,verified:!0})}),j=t?(0,i.jsx)(r.TXListItem,{title:t,subtitle:p("staking_slrs_create_new_title"),avatar:(0,i.jsx)(r.ValidatorAvatar,{src:s})}):null;return(0,i.jsx)(r.ConfirmTransaction,{avatar:(0,i.jsx)(r.IconAvatar,{size:"xl",icon:o.faSplit}),transactionFromItem:j||k,transactionToItem:j?k:void 0,hideFlowIcon:!0})}},"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationUnstaking.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.js"),o=s("../../libs/foundation-ui/dist/index.js"),r=s("../../libs/shared/dist/constants/mints.js"),u=s("../../libs/shared/dist/features/currencies/index.js"),l=s("../../libs/shared/dist/utils/displayPrice.js"),d=a(s("../../libs/shared/dist/components/TokenAvatar/index.js"));t.default=({amount:e})=>{const{value:t,suffix:s,prefix:a,price:c}=(0,u.useTokenFiatValue)("SOL",e);return(0,i.jsx)(o.ConfirmTransaction,{avatar:(0,i.jsx)(o.IconAvatar,{size:"xl",icon:n.faPiggyBank}),transactionFromItem:(0,i.jsx)(o.TXListItem,{title:(0,l.displayPrice)({amount:e,displayType:"solana",suffix:" SOL"}),subtitle:c?(0,l.displayPrice)({amount:t,displayType:"value",suffix:s,prefix:a}):void 0,avatar:(0,i.jsx)(d.default,{src:r.SOLANA_MINT_OBJ.logoURI,verified:!0})})})}},"../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationWithdrawStake.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/@fortawesome/pro-light-svg-icons/index.js"),o=s("../../libs/foundation-ui/dist/index.js"),r=s("../../libs/shared/dist/constants/mints.js"),u=s("../../libs/shared/dist/features/currencies/index.js"),l=s("../../libs/shared/dist/features/pfp/index.js"),d=s("../../libs/shared/dist/utils/displayPrice.js"),c=s("../../libs/shared/dist/utils/truncateMiddle.js"),m=a(s("../../libs/shared/dist/components/TokenAvatar/index.js"));t.default=({amount:e,walletName:t,walletPubkey:s})=>{const{value:a,suffix:f,prefix:_,price:p}=(0,u.useTokenFiatValue)("SOL",e);return(0,i.jsx)(o.ConfirmTransaction,{avatar:(0,i.jsx)(o.IconAvatar,{size:"xl",icon:n.faCoins}),transactionFromItem:(0,i.jsx)(o.TXListItem,{title:(0,d.displayPrice)({amount:e,displayType:"solana",suffix:" SOL"}),subtitle:p?(0,d.displayPrice)({amount:a,displayType:"value",suffix:f,prefix:_}):void 0,avatar:(0,i.jsx)(m.default,{src:r.SOLANA_MINT_OBJ.logoURI,verified:!0})}),transactionToItem:(0,i.jsx)(o.TXListItem,{title:t,subtitle:(0,c.truncateMiddle)(s),avatar:(0,i.jsx)(l.PFPAvatar,{publicKey:s})})})}},"../../libs/shared/dist/features/staking/constants/index.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_SOL_FOR_STAKING=void 0,t.MIN_SOL_FOR_STAKING=.01},"../../libs/shared/dist/features/staking/shared/InstantUnstakeSpeedupBanner.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstantUnstakeSpeedupBanner=void 0;const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),o=s("../../../node_modules/react-i18next/dist/es/index.js"),r=s("../../../node_modules/@tanstack/react-query/build/lib/index.js"),u=a(s("../../../node_modules/bignumber.js/bignumber.js")),l=s("../../libs/foundation-ui/dist/index.js"),d=a(s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationUnstaking.js")),c=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),m=s("../../libs/shared/dist/utils/lamportToSol.js"),f=s("../../libs/shared/dist/wallet/index.js"),_=s("../../libs/shared/dist/features/currencies/index.js"),p=s("../../libs/shared/dist/features/featureFlags/index.js"),k=s("../../libs/shared/dist/features/portfolio/hooks/useComputeUnitPrice.js"),j=s("../../libs/shared/dist/features/settings/index.js"),h=s("../../libs/shared/dist/features/stakingCore/api/transactions.js"),g=s("../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js");t.InstantUnstakeSpeedupBanner=({stakeAccount:e,onConfirm:t})=>{const{t:s}=(0,o.useTranslation)(),[a,b]=(0,n.useState)(!1),x=(0,r.useQueryClient)(),{transactionInit:v}=(0,f.useSolflareWallet)(),{lamports:S}=(0,c.useSolanaBalance)(),{computeUnitPrice:y}=(0,k.useComputeUnitPrice)(),T=new u.default(2e5).times(y).div(Math.pow(10,6)).plus(5e3).toNumber(),I=(0,_.useCurrentCurrency)(),w=(0,j.useNetwork)(),{data:P,isFetching:C,isSuccess:A}=(0,g.useInstantUnstakeQuote)({stakeAccountPubkey:e.publicKey,network:w.cluster,currency:I.ticker,enabled:!a});return(0,i.jsx)(l.InstantUnstakeBanner,{title:s("staking_instant_unstake_banner_title"),subtitle:s("staking_instant_unstake_banner_subtitle",{fee:new u.default(P?.fee?.percentage??0).times(100).toString()}),buttonTitle:s("staking_instant_unstake_banner_cta"),isLoading:a||C||!A||S<T,onClick:async()=>{if(!P)return;const a=(0,m.lamportsToSol)(P.outAmount??0),n=(0,m.lamportsToSol)(P.inAmount??0);b(!0),await v({title:s("staking_instant_unstake_title"),commitment:"confirmed",txBuilder:h.getInstantUnstakeTx,builderParams:{stakeAccount:e.publicKey,outAmount:P.outAmount,route:P.routeName,network:w.cluster},confirmDialog:(0,i.jsx)(d.default,{amount:a.toString()}),onBroadcast:({signature:t,stringifiedError:s})=>{(0,p.logSignTxInstantUnstake)({validatorName:e.validator?.name??"",validatorNodePubKey:e.validator?.nodePublicKey??"",validatorVotePubKey:e.validator?.votePublicKey??"",error:s,transaction:t??"",source:"stakeAccountDeactivating",market:P.routeName,amountInSol:n.toString(),amountInUsd:n.times(P.solPrice.usd).toString(),feeTotalPercentage:P.fee.percentage,solflareFeeAmountInSol:(0,m.lamportsToSol)(P.ourFee?.amount??0).toString(),solflareFeeAmountInUsd:(0,m.lamportsToSol)(P.ourFee?.amount??0).times(P.solPrice.usd).toString()})},onConfirm:({status:e})=>{"success"===e&&(t?.(),x.invalidateQueries(["staking-accounts"]))},onEnd:()=>{b(!1)}})}})}},"../../libs/shared/dist/features/staking/web/ExplorerDropDownItem.js":(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExplorerDropDownItem=void 0;const a=s("../../../node_modules/react/jsx-runtime.js"),i=s("../../../node_modules/react-i18next/dist/es/index.js"),n=s("../../../node_modules/react-redux/es/index.js"),o=s("../../libs/rise-ui/dist/index.js"),r=s("../../libs/shared/dist/store/actions/common.js");t.ExplorerDropDownItem=({publicKey:e,onClose:t})=>{const{t:s}=(0,i.useTranslation)(),u=(0,n.useDispatch)();return(0,a.jsx)(o.DropDownItem,{onClick:()=>{u((0,r.openExplorerAccount)({account:e})),t()},children:s("action_view_in_explorer")})}},"../../libs/shared/dist/features/stakingCore/api/transactions.js":function(e,t,s){var a=s("../../../node_modules/console-browserify/index.js"),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getInstantUnstakeTx=t.getInstantUnstakeQuote=void 0;const n=s("../../libs/shared/dist/api/index.js"),o=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=i(s("../../../node_modules/base64-js/index.js")),u="https://wallet-api.solflare.com";t.getInstantUnstakeQuote=async(e,t,s)=>{const{body:a}=await(0,n.post)(`${u}/v2/unstake/quote`,{stakeAccount:e,network:t,currency:s});return a},t.getInstantUnstakeTx=async e=>{try{const{body:t}=await(0,n.post)(`${u}/v2/unstake/tx`,e);if(t?.error)throw new Error(t.error);if(!t?.txs?.length)throw new Error("Failed to generate transaction");return{transaction:o.VersionedTransaction.deserialize(r.default.toByteArray(t.txs[0]))}}catch(e){throw a.dir(e),new Error(e?.response?.data?.error||e?.message)}}},"../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js":(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.useInstantUnstakeQuote=void 0;const a=s("../../../node_modules/@tanstack/react-query/build/lib/index.js"),i=s("../../libs/shared/dist/features/stakingCore/api/transactions.js");t.useInstantUnstakeQuote=({stakeAccountPubkey:e,network:t,currency:s,enabled:n=!0})=>(0,a.useQuery)({queryKey:["unstakeTx",e],queryFn:()=>(0,i.getInstantUnstakeQuote)(e,t,s),enabled:n,refetchInterval:2e4,cacheTime:0,retry:!1})},"../../libs/shared/dist/features/stakingModal/hooks/useSplitStakeForm.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useSplitStakeForm=void 0;const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),o=s("../../../node_modules/react-i18next/dist/es/index.js"),r=s("../../../node_modules/react-router-dom/esm/react-router-dom.js"),u=a(s("../../../node_modules/bignumber.js/bignumber.js")),l=a(s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationSplitStake.js")),d=s("../../libs/shared/dist/utils/lamportToSol.js"),c=s("../../libs/shared/dist/utils/truncateMiddle.js"),m=s("../../libs/shared/dist/features/stakingCore/index.js"),f=s("../../libs/shared/dist/features/stakingModal/utils/splitStakeErrors.js");t.useSplitStakeForm=(e,t,s)=>{const{replace:a}=(0,r.useHistory)(),[_,p]=(0,n.useState)(),{mutateAsync:k,isLoading:j}=(0,m.useSplitMutation)(),{t:h}=(0,o.useTranslation)(),{data:g,isLoading:b}=(0,m.useValidators)(),x=(0,d.lamportsToSol)(t.actions.find((e=>"split"===e.name))?.metadata?.amountMax||0),v=(0,d.lamportsToSol)(t.actions.find((e=>"split"===e.name))?.metadata?.amountMin||0),S=_?new u.default(_):void 0,y=(0,f.getSplitStakeErrors)(S,v,x,h);return{splitStake:()=>k({amountSOL:_,wallet:e,confirmData:(0,i.jsx)(l.default,{validatorName:t.validator?.name??(0,c.truncateMiddle)(t.validator?.votePublicKey),validatorImage:t.validator?.image,amount:S?.toString()??"0"}),stakePubkey:t.publicKey,onBroadcast:()=>{s(),a("/staking")}}),splitStakeLoading:j,selectedAmount:_,setSelectedAmount:p,minAmountBN:v,maxAmountBN:x,validatorsLoading:b,validators:g,error:y}}},"../../libs/shared/dist/features/stakingModal/hooks/useUnstakeForm.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useUnstakeForm=void 0;const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react/index.js"),o=s("../../../node_modules/react-i18next/dist/es/index.js"),r=s("../../../node_modules/react-router-dom/esm/react-router-dom.js"),u=s("../../../node_modules/@tanstack/react-query/build/lib/index.js"),l=a(s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationUnstaking.js")),d=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),c=s("../../libs/shared/dist/utils/extension.js"),m=s("../../libs/shared/dist/utils/lamportToSol.js"),f=s("../../libs/shared/dist/wallet/index.js"),_=s("../../libs/shared/dist/features/currencies/index.js"),p=s("../../libs/shared/dist/features/featureFlags/index.js"),k=s("../../libs/shared/dist/features/settings/index.js"),j=s("../../libs/shared/dist/features/staking/api/staking.js"),h=s("../../libs/shared/dist/features/stakingCore/api/transactions.js"),g=s("../../libs/shared/dist/features/stakingCore/hooks/useInstantUnstakeQuote.js");t.useUnstakeForm=({stakeAccount:e,close:t})=>{const{t:s}=(0,o.useTranslation)(),a=(0,r.useHistory)(),{usdPrice:b}=(0,d.useSolanaBalance)(),[x,v]=(0,n.useState)(!1),[S,y]=(0,n.useState)(!1),{wallet:T,transactionInit:I}=(0,f.useSolflareWallet)(),w=(0,u.useQueryClient)(),P=(0,_.useCurrentCurrency)(),C=(0,k.useNetwork)(),{data:A,isFetching:M,isSuccess:U,isError:L}=(0,g.useInstantUnstakeQuote)({stakeAccountPubkey:e.publicKey,network:C.cluster,currency:P.ticker,enabled:x&&!S});(0,n.useEffect)((()=>{x&&!M&&L&&v(!1)}),[x,L,M]);const F=async()=>{const a=(0,m.lamportsToSol)(e.amount??0);y(!0),await I({title:s("unstaking"),commitment:"confirmed",txBuilder:j.deactivateStakingAccount,builderParams:{address:T.publicKey,stakeAccount:e.publicKey,setComputeBudget:!0,network:C.cluster},confirmDialog:(0,i.jsx)(l.default,{amount:a.toString()}),onBroadcast:({status:s,signature:i,stringifiedError:n})=>{(0,p.logSignTxUnstake)({validatorName:e.validator?.name??"",validatorNodePubKey:e.validator?.nodePublicKey??"",validatorVotePubKey:e.validator?.votePublicKey??"",error:n,transaction:i??"",amountInSol:a.toString(),amountInUsd:a.times(b).toString()}),"success"===s&&t?.()},onConfirm:({status:e})=>{"success"===e&&w.invalidateQueries(["staking-accounts"])},onEnd:()=>{y(!1)}})};return{instantChecked:x,setInstantChecked:v,unstake:async()=>x?(async()=>{if(!A)return;const n=(0,m.lamportsToSol)(A.outAmount??0),o=(0,m.lamportsToSol)(A.inAmount??0);y(!0),await I({title:s("staking_instant_unstake_title"),commitment:"confirmed",txBuilder:h.getInstantUnstakeTx,builderParams:{stakeAccount:e.publicKey,outAmount:A.outAmount,route:A.routeName,network:C.cluster},confirmDialog:(0,i.jsx)(l.default,{amount:n.toString()}),onBroadcast:({signature:s,stringifiedError:i,status:n})=>{(0,p.logSignTxInstantUnstake)({validatorName:e.validator?.name??"",validatorNodePubKey:e.validator?.nodePublicKey??"",validatorVotePubKey:e.validator?.votePublicKey??"",error:i,transaction:s??"",source:"stakeAccountActive",market:A.routeName,amountInSol:o.toString(),amountInUsd:o.times(A.solPrice.usd).toString(),feeTotalPercentage:A.fee.percentage,solflareFeeAmountInSol:(0,m.lamportsToSol)(A.ourFee?.amount??0).toString(),solflareFeeAmountInUsd:(0,m.lamportsToSol)(A.ourFee?.amount??0).times(A.solPrice.usd).toString()}),"success"===n&&(t?.(),c.isExtensionPopup&&a.replace("/staking"))},onConfirm:({status:e})=>{"success"===e&&w.invalidateQueries(["staking-accounts"])},onEnd:()=>{y(!1)}})})():F(),standardUnstake:F,unstakeTx:A,isFetching:M,isSuccess:U,isLoading:S}}},"../../libs/shared/dist/features/stakingModal/hooks/useUnstakeWarnings.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useUnstakeWarnings=void 0;const i=s("../../../node_modules/react/index.js"),n=s("../../../node_modules/react-i18next/dist/es/index.js"),o=s("../../../node_modules/@solana/web3.js/lib/index.browser.esm.js"),r=a(s("../../../node_modules/bignumber.js/bignumber.js")),u=s("../../libs/shared/dist/hooks/useSolanaBalance/index.js"),l=s("../../libs/shared/dist/features/portfolio/hooks/useComputeUnitPrice.js");t.useUnstakeWarnings=()=>{const{t:e}=(0,n.useTranslation)(),{isLoading:t,lamports:s}=(0,u.useSolanaBalance)(),{computeUnitPrice:a}=(0,l.useComputeUnitPrice)(),d=(0,i.useMemo)((()=>{if(t)return;const i=new r.default(2e5).times(a).div(Math.pow(10,6)).plus(5e3);return s<i.toNumber()?{variant:"error",title:e("insufficient_ticker",{ticker:"SOL"}),message:e("swap_alert_ensure_minimum",{amountWithSuffix:`${i.div(o.LAMPORTS_PER_SOL)} SOL`})}:void 0}),[a,t,s,e]);return{isLoading:t,alertProps:d}}},"../../libs/shared/dist/features/stakingModal/hooks/useWithdrawStakeForm.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useWithdrawStakeForm=void 0;const i=s("../../../node_modules/react/jsx-runtime.js"),n=a(s("../../../node_modules/react/index.js")),o=s("../../../node_modules/react-router-dom/esm/react-router-dom.js"),r=a(s("../../libs/shared/dist/components/ConfirmationHelpers/ConfirmationWithdrawStake.js")),u=s("../../libs/shared/dist/utils/lamportToSol.js"),l=s("../../libs/shared/dist/features/stakingCore/index.js");t.useWithdrawStakeForm=(e,t,s)=>{const{replace:a}=(0,o.useHistory)(),{mutateAsync:d,isLoading:c}=(0,l.useWithdrawMutation)(),[m,f]=n.default.useState(!0),{data:_,isLoading:p}=(0,l.useValidators)(),k=t.actions.find((e=>"withdraw"===e.name))?.metadata,j=(m?k?.amountWithClosing:k?.amount)||0,h=(0,u.lamportsToSol)(j);return{amount:h,validators:_,validatorsLoading:p,setCloseAccount:f,closeAccount:m,withdrawStake:()=>{d({amountLamports:j,wallet:e,confirmData:(0,i.jsx)(r.default,{amount:h.toString(),walletName:e.accountName,walletPubkey:e.getPublicKey()}),stakePubkey:t.publicKey,onBroadcast:()=>{s(),a("/staking")}})},withdrawLoading:c}}},"../../libs/shared/dist/features/stakingModal/shared/UnstakeModal.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UnstakeModal=void 0;const i=s("../../../node_modules/react/jsx-runtime.js"),n=s("../../../node_modules/react-i18next/dist/es/index.js"),o=a(s("../../../node_modules/bignumber.js/bignumber.js")),r=s("../../libs/foundation-ui/dist/index.js"),u=s("../../libs/shared/dist/components/UniversalModal/index.js"),l=s("../../libs/shared/dist/utils/displayPrice.js"),d=s("../../libs/shared/dist/utils/lamportToSol.js"),c=s("../../libs/shared/dist/utils/timeRemaining.js"),m=s("../../libs/shared/dist/features/currencies/index.js"),f=s("../../libs/shared/dist/features/portfolio/hooks/useSolanaToken.js"),_=s("../../libs/shared/dist/features/stakingCore/index.js"),p=s("../../libs/shared/dist/features/stakingModal/hooks/useUnstakeForm.js"),k=s("../../libs/shared/dist/features/stakingModal/hooks/useUnstakeWarnings.js");t.UnstakeModal=({stakeAccount:e,close:t})=>{const{t:s}=(0,n.useTranslation)(),{data:a}=(0,f.useSolanaToken)(),{data:j}=(0,_.useStakingAccounts)(),{instantChecked:h,setInstantChecked:g,unstake:b,unstakeTx:x,isFetching:v,isSuccess:S,isLoading:y}=(0,p.useUnstakeForm)({stakeAccount:e,close:t}),{isLoading:T,alertProps:I}=(0,k.useUnstakeWarnings)(),w=(0,d.lamportsToSol)(e.amount??0),P=(0,c.secondsToTimeRemaining)(j?.header.epochEndSeconds??0);return j?(0,i.jsx)(u.UniversalModal,{onClose:t,title:s("staking_unstake_title"),textAlign:"left",footer:(0,i.jsxs)(i.Fragment,{children:[I&&(0,i.jsx)(r.Alert,{...I}),(0,i.jsx)(r.Button,{disabled:h&&(v||!S)||y||T||!!I,onClick:()=>{b()},children:s("action_review")})]}),children:(0,i.jsxs)(r.InstantUnstake,{children:[(0,i.jsx)(r.ValidatorContainer,{title:s("staking_native_validator"),name:e.validator?.name??"",image:e.validator?.image??void 0,amount:(0,l.displayPrice)({amount:w.toString(),displayType:"amount",pricePerCoin:a?.solPrice?.price,suffix:" SOL"}),value:(0,i.jsx)(m.DisplayComputedFiatValue,{value:w.multipliedBy(a?.price?.price??0).toNumber()})}),(0,i.jsx)(r.UnstakeContainer,{title:s("staking_instant_unstake_toggle_title"),subtitle:s("staking_instant_unstake_toggle_subtitle"),toggle:(0,i.jsx)(r.Switch,{checked:h,onCheckedChange:g}),children:(0,i.jsxs)(r.List,{gapSize:"gapS",children:[(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[s("staking_unstake_time_label"),(0,i.jsx)(r.InfoTooltip,{tooltip:s("staking_instant_unstake_time_tooltip")})]}),right:(0,i.jsx)(r.InfoRowRight,{children:h?s("staking_instant_unstake_time_instant"):P})}),h&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[s("staking_instant_unstake_fee"),(0,i.jsx)(r.InfoTooltip,{tooltip:s("staking_instant_unstake_fee_tooltip")})]}),right:(0,i.jsxs)(r.InfoRowRight,{isLoading:v||!S,children:[new o.default(x?.fee?.percentage??0).times(100).toString(),"%"]})}),(0,i.jsx)(r.InfoRow,{left:(0,i.jsxs)(r.InfoRowLeft,{children:[s("staking_unstake_total_received"),(0,i.jsx)(r.InfoTooltip,{tooltip:s("staking_unstake_tike_tooltip")})]}),right:(0,i.jsx)(r.InfoRowRight,{isLoading:v||!S,children:(0,l.displayPrice)({amount:(0,d.lamportsToSol)(x?.outAmount??0),displayType:"solana",suffix:" SOL"})})})]})]})})]})}):null}},"../../libs/shared/dist/features/stakingModal/utils/splitStakeErrors.js":(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSplitStakeErrors=void 0;const a=s("../../libs/shared/dist/features/stakingCore/constants.js");t.getSplitStakeErrors=(e,t,s,i)=>{if(void 0!==e)return e.isLessThan(t)?{title:i("staking_validation_amount_below_minimum_title"),message:i("staking_validation_split_amount_below_minimum_description",{amount:`${a.MIN_STAKE_AMOUNT} SOL`})}:e.isGreaterThan(s)?{title:i("action_insufficient_balance"),message:i("staking_validation_insufficient_balance_description")}:void 0}},"../../libs/shared/dist/utils/timeRemaining.js":function(e,t,s){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.secondsToTimeRemaining=t.timeRemaining=void 0;const i=a(s("../../../node_modules/dayjs/dayjs.min.js"));t.timeRemaining=e=>{const t=(0,i.default)(),s=i.default.unix(e).diff(t),a=i.default.duration(s),n=[];return a.days()>0&&n.push(`${a.days()}d`),a.hours()>0&&n.push(`${a.hours()}h`),a.minutes()>0&&n.push(`${a.minutes()}m`),n.join(" ")},t.secondsToTimeRemaining=(e,t=3)=>{const s=i.default.duration(e>=0?e:0,"seconds"),a=[];return s.years()>0&&a.push(`${s.years()}yr`),s.months()>0&&a.push(`${s.months()}mo`),s.days()>0&&a.push(`${s.days()}d`),s.hours()>0&&a.push(`${s.hours()}h`),s.minutes()>0&&a.push(`${s.minutes()}m`),s.seconds()>0&&a.push(`${s.seconds()}s`),0===a.length&&a.push("0s"),a.slice(0,t).join(" ")}}}]);